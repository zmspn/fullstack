(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(14),r=t.n(o),c=t(3),u=t(2),a=t(0),s=function(e){var n=e.addPerson,t=e.newName,o=e.handleNameChange,r=e.newNumber,c=e.handleNumberChange;return Object(a.jsxs)("form",{onSubmit:n,children:[Object(a.jsxs)("div",{children:["name:",Object(a.jsx)("input",{value:t,onChange:o})]}),Object(a.jsxs)("div",{children:["number:",Object(a.jsx)("input",{value:r,onChange:c})]}),Object(a.jsx)("button",{type:"submit",children:"add"})]})},i=function(e){var n=e.person,t=e.removePerson;return Object(a.jsxs)("li",{children:[" ",n.name," ",n.phone,Object(a.jsx)("button",{onClick:function(){return t(n.id)},children:"delete"})]},n.id)},l=function(e){var n=e.persons,t=e.removePerson;return n.map((function(e){return Object(a.jsx)(i,{person:e,removePerson:t},e.name)}))},d=t(4),f=t.n(d),j="/api/persons/",h={getAllPersons:function(){var e=f.a.get(j);return console.log(e),e.then((function(e){return e.data}))},createPerson:function(e){return f.a.post(j,e).then((function(e){return e.data}))},deletePerson:function(e){return console.log("deleted person with id"+e),f.a.delete(j+e).then((function(e){return e.data}))},editPerson:function(e,n){return f.a.put(j+e,n).then((function(e){return e.data}))}},m=function(e){e.type;var n=e.message;return null===n?null:n.includes("Success")?Object(a.jsx)("div",{className:"successNotification",children:n}):n.includes("Fail")?Object(a.jsx)("div",{className:"failNotification",children:n}):void 0},b=function(){var e=Object(u.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],r=Object(u.useState)(""),i=Object(c.a)(r,2),d=i[0],f=i[1],j=Object(u.useState)(""),b=Object(c.a)(j,2),O=b[0],p=b[1],v=Object(u.useState)(t),g=Object(c.a)(v,2),x=g[0],w=g[1],P=Object(u.useState)(null),N=Object(c.a)(P,2),S=N[0],C=N[1];Object(u.useEffect)((function(){console.log("loading "),h.getAllPersons().then((function(e){console.log("response",e),o(e),w(e),console.log(e)}))}),[]);return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(m,{message:S}),Object(a.jsx)("form",{children:Object(a.jsxs)("div",{children:["filter shown with",Object(a.jsx)("input",{onChange:function(e){o(x.filter((function(n){return n.name.toLocaleLowerCase().match(e.target.value)})))}})]})}),Object(a.jsx)("h2",{children:"add a new"}),Object(a.jsx)(s,{addPerson:function(e){if(e.preventDefault(),x.map((function(e){return e.name})).includes(d)){if(window.confirm("".concat(d," is already added to phonebook, replace number with new one ?"))){var n={name:d,number:O},r=x.find((function(e){return e.name===d}));h.editPerson(r.id,n).then((function(e){console.log("returned ::"+e.name),o(t.map((function(n){return n.name!==d?n:e}))),w(x.map((function(n){return n.name!==d?n:e}))),C("Success: user's"+n.name+" number changed"),setTimeout((function(){C(null)}),3e3)})).catch((function(e){C("Failure: "+e.response.data.error)})),setTimeout((function(){C(null)}),1e4)}}else{var c={name:d,number:O};h.createPerson(c).then((function(e){console.log("adding object"+e),o(t.concat(e)),w(x.concat(e)),C("Success: user "+c.name+" has been added"),setTimeout((function(){C(null)}),1e4)})).catch((function(e){C("Failure: "+e.response.data.error)})),setTimeout((function(){C(null)}),1e4)}},newName:d,handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){p(e.target.value)}}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(l,{persons:t,removePerson:function(e){var n=t.filter((function(n){return n.id===e}));if(window.confirm("Delete user "+n[0].name+" ?")){h.deletePerson(e).then((function(e){console.log(e),C("Success: user "+n[0].name+" has been deleted"),setTimeout((function(){C(null)}),3e3)})).catch((function(e){C("Failure: user "+n[0].name+" not found")}));var r=t.filter((function(n){return n.id!==e}));w(r),o(r)}}})]})};t(38);r.a.render(Object(a.jsx)(b,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.ce6e35b5.chunk.js.map