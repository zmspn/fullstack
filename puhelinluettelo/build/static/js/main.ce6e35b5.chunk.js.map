{"version":3,"sources":["components/AddPerson.js","components/Person.js","components/Persons.js","services/Persons.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Person","person","removePerson","name","phone","onClick","id","Persons","persons","map","personURL","exportedObject","getAllPersons","request","axios","get","console","log","then","r","data","createPerson","personObject","post","deletePerson","personID","delete","editPerson","put","response","Notification","message","includes","className","App","useState","setPersons","setNewName","setNumber","allPersons","setAllPersons","notification","setNotification","useEffect","personService","event","filter","toLocaleLowerCase","match","target","preventDefault","window","confirm","number","find","element","setTimeout","catch","err","error","concat","usr","filtered","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ce6e35b5.chunk.js","sourcesContent":["import React from \"react\";\n\nconst PersonForm  = ({addPerson, newName,handleNameChange,newNumber, handleNumberChange })=>\n\n    <form onSubmit={addPerson}>\n        <div>name:<input\n            value={newName}\n            onChange={handleNameChange}/>\n        </div>\n        <div>number:<input\n            value={newNumber}\n            onChange={handleNumberChange}/>\n        </div>\n        <button type=\"submit\">add</button>\n    </form>\nexport default PersonForm","import React from 'react'\n\nconst Person = ({person, removePerson}) => {\n    return (\n        <li key={person.id}> {person.name} {person.phone}\n            <button onClick={() => removePerson(person.id)}>delete</button>\n        </li>\n    )\n}\n\nexport default Person","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({persons, removePerson}) => {\n    return (\n        persons.map(person => <Person key={person.name} person={person} removePerson={removePerson}/>)\n    )\n}\n\nexport default Persons","import axios from \"axios\";\n\nconst personURL  = '/api/persons/'\n\nconst getAllPersons = () => {\n    const request = axios.get(personURL)\n    console.log(request)\n    return request.then(r => r.data)\n}\nconst createPerson = personObject => {\n    const request = axios.post(personURL, personObject)\n    return request.then(r => r.data)\n}\nconst deletePerson = personID => {\n    console.log(\"deleted person with id\" + personID)\n    const request = axios.delete(personURL + personID)\n    return request.then(r => r.data)\n}\nconst editPerson = (personID, personObject)=>{\n    const request = axios.put(personURL + personID, personObject)\n    return request.then(response => response.data)\n}\n\nconst exportedObject = {\n    getAllPersons,\n    createPerson,\n    deletePerson,\n    editPerson\n}\nexport default exportedObject","const Notification = ({type, message }) => {\n\n    if(message === null){\n        return null\n    } else if (message.includes(\"Success\")){\n        return (\n            <div className=\"successNotification\">\n                {message}\n            </div>\n        )\n    } else if(message.includes(\"Fail\")){\n        return (\n            <div className=\"failNotification\">\n                {message}\n            </div>\n        )\n    }\n\n}\n\nexport default Notification","import React, {useEffect, useState} from 'react'\nimport PersonForm from \"./components/AddPerson\";\nimport Persons from \"./components/Persons\";\nimport personService from '../src/services/Persons'\nimport Notification from \"./components/Notification\";\n\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [newName, setNewName] = useState('')\n    const [newNumber, setNumber] = useState('')\n    const [allPersons, setAllPersons] = useState(persons)\n    const [notification, setNotification] = useState(null)\n    useEffect(() => {\n        console.log(\"loading \")\n\n        personService\n            .getAllPersons()\n            .then(r => {\n                console.log(\"response\", r)\n                setPersons(r)\n                setAllPersons(r)\n                console.log(r)\n            })\n    }, [])\n\n    const addPerson = (event) => {\n        event.preventDefault()\n        if (!allPersons.map(person => person.name).includes(newName)) {\n\n            const personObject = {\n                name: newName,\n                number: newNumber,\n            }\n            personService\n                .createPerson(personObject)\n                .then(r => {\n                    console.log(\"adding object\" + r)\n                    setPersons(persons.concat(r))\n                    setAllPersons(allPersons.concat(r))\n                    setNotification(\"Success: user \" + personObject.name + \" has been added\")\n                    setTimeout(() => {\n                        setNotification(null)\n                    }, 10000)\n                })\n                .catch(err =>{\n                    setNotification(\"Failure: \" + err.response.data.error)\n                })\n                setTimeout(() => {\n                    setNotification(null)\n                }, 10000)\n                \n\n        } else {\n            if (window.confirm(`${newName} is already added to phonebook, replace number with new one ?`)) {\n                const personObject = {\n                    name: newName,\n                    number: newNumber,\n                }\n                const editPerson = allPersons.find(element => element.name === newName)\n                personService\n                    .editPerson(editPerson.id, personObject).then(r => {\n                        console.log(\"returned ::\" + r.name)\n                    setPersons(persons.map(person => person.name !== newName ? person : r))\n                    setAllPersons(allPersons.map(person => person.name !== newName ? person : r))\n                    setNotification(\"Success: user's\" + personObject.name + \" number changed\")\n                    setTimeout(() => {\n                        setNotification(null)\n                    }, 3000)\n                })\n                .catch(err =>{\n                    setNotification(\"Failure: \" + err.response.data.error)\n                })\n                setTimeout(() => {\n                    setNotification(null)\n                }, 10000)\n            }\n        }\n    }\n    const handleNameChange = (event) => {\n        setNewName(event.target.value)\n    }\n    const handleNumberChange = (event) => {\n        setNumber(event.target.value)\n    }\n    const handleFilterChange = (event) => {\n        const searchResults = () => allPersons.filter(person => person.name.toLocaleLowerCase().match(event.target.value))\n        setPersons(searchResults())\n    }\n    const removePerson = personID => {\n        const usr = persons.filter(person => person.id === personID)\n        if (window.confirm('Delete user ' + usr[0].name + \" ?\")) {\n            personService\n                .deletePerson(personID)\n                .then(r => {\n                    console.log(r)\n                    setNotification(\"Success: user \" + usr[0].name + \" has been deleted\")\n                    setTimeout(() => {\n                        setNotification(null)\n                    }, 3000)\n                })\n                .catch(err =>{\n                    setNotification(\"Failure: user \" + usr[0].name + \" not found\")\n                })\n            const filtered = persons.filter(person => person.id !== personID)\n            setAllPersons(filtered)\n            setPersons(filtered)\n\n        }\n    }\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification message={notification}/>\n            <form>\n                <div>filter shown with<input onChange={handleFilterChange}/>\n                </div>\n            </form>\n            <h2>add a new</h2>\n            <PersonForm\n                addPerson={addPerson}\n                newName={newName}\n                handleNameChange={handleNameChange}\n                handleNumberChange={handleNumberChange}/>\n            <h2>Numbers</h2>\n            <Persons persons={persons} removePerson={removePerson}/>\n        </div>\n    )\n}\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}